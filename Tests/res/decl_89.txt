using_block(
  fn_defs: [
    syn_fn_def(
      name: fn_symbol(apply),
      params: [
        (
          type: set_type(nonempty: false, elem_type: type_var(t1)),
          var: var(s)
        )
      ],
      local_fns: [],
      expr: builtin_call(
        name: mset,
        params: [
          seq_comp(
            var: var(x),
            expr: fn_call(
              name: fn_symbol(f),
              params: [const_or_var(x)],
              named_params: []
            ),
            src_expr: fn_call(
              name: fn_symbol(rand_sort),
              params: [const_or_var(s)],
              named_params: []
            )
          )
        ]
      ),
      res_type: map_type(
        value_type: type_ref(type_symbol(nznat)),
        key_type: type_var(t2)
      )
    )
  ],
  signatures: [
    syn_sgn(
      name: fn_symbol(f),
      params: [type_var(t1)],
      res_type: type_var(t2)
    )
  ]
)
