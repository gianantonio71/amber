syn_fn_def(
  name: fn_symbol(is_almost_def),
  params: [
    (type: type_ref(type_symbol(fnsymbol)), var: var(name)),
    (type: type_ref(type_symbol(nat)), var: var(arity)),
    (
      type: set_type(
        nonempty: false,
        elem_type: type_ref(type_symbol(untypedsgn))
      ),
      var: var(env)
    )
  ],
  local_fns: [],
  expr: ex_qual(
    sel_exprs: [
      eq(
        left: accessor(expr: const_or_var(s), field: object(name)),
        right: const_or_var(name)
      ),
      eq(
        left: accessor(expr: const_or_var(s), field: object(arity)),
        right: const_or_var(arity)
      )
    ],
    source: [
      in_clause(src: const_or_var(env), ptrn: var_ptrn(name: var(s)))
    ]
  ),
  res_type: type_ref(type_symbol(bool))
)
