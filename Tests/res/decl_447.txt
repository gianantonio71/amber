syn_fn_def(
  name: fn_symbol(extern_vars),
  params: [
    (
      type: seq_type(
        nonempty: false,
        elem_type: type_ref(type_symbol(statement))
      ),
      var: var(stmts)
    )
  ],
  local_fns: [],
  expr: do_expr(
    [
      assignment_stmt(value: set_expr({}), var: var(def_vs)),
      assignment_stmt(value: set_expr({}), var: var(ext_vs)),
      for_stmt(
        body: [
          assignment_stmt(
            value: fn_call(
              name: op_symbol(amp),
              params: [
                const_or_var(ext_vs),
                fn_call(
                  name: op_symbol(minus),
                  params: [
                    fn_call(
                      name: fn_symbol(extern_vars),
                      params: [const_or_var(s)],
                      named_params: []
                    ),
                    const_or_var(def_vs)
                  ],
                  named_params: []
                )
              ],
              named_params: []
            ),
            var: var(ext_vs)
          ),
          assignment_stmt(
            value: fn_call(
              name: op_symbol(amp),
              params: [
                const_or_var(def_vs),
                fn_call(
                  name: fn_symbol(new_vars),
                  params: [const_or_var(s)],
                  named_params: []
                )
              ],
              named_params: []
            ),
            var: var(def_vs)
          )
        ],
        loops: [seq_iter(var: var(s), values: const_or_var(stmts))]
      ),
      return_stmt(const_or_var(ext_vs))
    ]
  ),
  res_type: set_type(nonempty: false, elem_type: type_ref(type_symbol(var)))
)
