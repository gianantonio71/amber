syn_fn_def(
  name: fn_symbol(create_type_map),
  params: [(type: type_ref(type_symbol(synprg)), var: var(prg))],
  local_fns: [],
  expr: do_expr(
    [
      assignment_stmt(
        value: map_comp(
          sel_exprs: [],
          source: [
            in_clause(
              src: fn_call(
                name: fn_symbol(set),
                params: [
                  fn_call(
                    name: fn_symbol(untag),
                    params: [const_or_var(prg)],
                    named_params: []
                  )
                ],
                named_params: []
              ),
              ptrn: var_ptrn(
                name: var(td),
                ptrn: type_ptrn(type_ref(type_symbol(syntypedef)))
              )
            )
          ],
          value_expr: accessor(expr: const_or_var(td), field: object(type)),
          key_expr: accessor(expr: const_or_var(td), field: object(name))
        ),
        var: var(tdef_map)
      ),
      assignment_stmt(
        value: fn_call(
          name: fn_symbol(inst_req_par_types),
          params: [const_or_var(prg)],
          named_params: []
        ),
        var: var(par_tdef_map)
      ),
      return_stmt(
        fn_call(
          name: op_symbol(amp),
          params: [const_or_var(tdef_map), const_or_var(par_tdef_map)],
          named_params: []
        )
      )
    ]
  ),
  res_type: map_type(
    value_type: type_ref(type_symbol(syntype)),
    key_type: type_ref(type_symbol(typesymbol))
  )
)
