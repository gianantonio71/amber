syn_fn_def(
  name: fn_symbol(untyped_sgns),
  params: [
    (
      type: map_type(
        value_type: union_type(
          {
            type_ref(type_symbol(exttype)),
            type_ref(type_symbol(extexpr))
          }
        ),
        key_type: union_type(
          {
            tag_type(
              obj_type: type_ref(type_symbol(atom)),
              tag_type: symb_type(object(named_par))
            )
          }
        )
      ),
      var: var(nps)
    )
  ],
  local_fns: [],
  expr: set_comp(
    sel_exprs: [],
    source: [
      map_in_clause(
        src: const_or_var(nps),
        value_ptrn: var_ptrn(name: var(type_or_expr)),
        key_ptrn: var_ptrn(name: var(v))
      )
    ],
    expr: fn_call(
      name: fn_symbol(untyped_sgn),
      params: [const_or_var(v), const_or_var(type_or_expr)],
      named_params: []
    )
  ),
  res_type: set_type(
    nonempty: false,
    elem_type: type_ref(type_symbol(basicuntypedsgn))
  )
)
