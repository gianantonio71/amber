syn_fn_def(
  name: fn_symbol(subexprs),
  params: [(type: type_ref(type_symbol(subexpr)), var: var(expr))],
  local_fns: [],
  expr: match_expr(
    cases: [
      case(
        expr: set_expr({const_or_var(expr)}),
        patterns: [type_ptrn(type_ref(type_symbol(expr)))]
      ),
      case(
        expr: set_expr(
          {
            accessor(expr: const_or_var(expr), field: object(expr)),
            accessor(expr: const_or_var(expr), field: object(cond))
          }
        ),
        patterns: [type_ptrn(type_ref(type_symbol(condexpr)))]
      )
    ],
    exprs: [fn_par(0)]
  ),
  res_type: set_type(nonempty: false, elem_type: type_ref(type_symbol(expr)))
)
